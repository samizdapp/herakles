"use strict";(self.webpackChunksamizdapp_herakles=self.webpackChunksamizdapp_herakles||[]).push([[707],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),d=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=d(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=d(n),m=o,h=u["".concat(s,".").concat(m)]||u[m]||p[m]||a;return n?r.createElement(h,i(i({ref:t},c),{},{components:n})):r.createElement(h,i({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var d=2;d<a;d++)i[d]=n[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4473:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var r=n(7462),o=(n(7294),n(3905));const a={sidebar_position:2},i="Configure Device & Deployment",l={unversionedId:"getting-started/configure-device-deployment",id:"getting-started/configure-device-deployment",title:"Configure Device & Deployment",description:"Currently, the only supported method of configuring your device and deployment",source:"@site/docs/getting-started/configure-device-deployment.md",sourceDirName:"getting-started",slug:"/getting-started/configure-device-deployment",permalink:"/docs/getting-started/configure-device-deployment",draft:!1,editUrl:"https://github.com/samizdapp/herakles/tree/master/docs/docs/getting-started/configure-device-deployment.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Clone the Repository",permalink:"/docs/getting-started/clone-the-repo"},next:{title:"Setup Your Client",permalink:"/docs/getting-started/setup-client"}},s={},d=[{value:"balenaCloud",id:"balenacloud",level:2},{value:"Configure Device",id:"configure-device",level:3},{value:"Configure Your Dev Environment",id:"configure-your-dev-environment",level:3},{value:"Push a Release",id:"push-a-release",level:3}],c={toc:d};function p(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"configure-device--deployment"},"Configure Device & Deployment"),(0,o.kt)("p",null,"Currently, the only supported method of configuring your device and deployment\nis using balena."),(0,o.kt)("h2",{id:"balenacloud"},"balenaCloud"),(0,o.kt)("p",null,"This section assumes your device is a ROCK Pi 4B; however, any of the\n",(0,o.kt)("a",{parentName:"p",href:"https://www.balena.io/docs/reference/hardware/devices/"},"devices that balena supports"),"\nshould work."),(0,o.kt)("h3",{id:"configure-device"},"Configure Device"),(0,o.kt)("p",null,"To setup and configure your device using balena, you'll need to create a free\nbalenaCloud account, create a fleet, and add your device to that fleet."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Sign up for an account at ",(0,o.kt)("a",{parentName:"p",href:"https://dashboard.balena-cloud.com/"},"https://dashboard.balena-cloud.com/"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},'From the "Fleets" screen, click "Create fleet".')),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Follow the docs at\n",(0,o.kt)("a",{parentName:"p",href:"https://www.balena.io/docs/learn/getting-started/raspberrypi3/nodejs/#create-a-fleet"},"https://www.balena.io/docs/learn/getting-started/raspberrypi3/nodejs/#create-a-fleet"),"\nto finish creating your fleet, adding your device, and provisioning your\ndevice.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},'Follow the remainder of the "Add new device" Instructions section:'),(0,o.kt)("p",{parentName:"li"},"a. Once the device has powered down, remove the SD card from the device."),(0,o.kt)("p",{parentName:"li"},"b. Power off and power back on the device (by disconnecting and reconnecting\nthe power)."),(0,o.kt)("p",{parentName:"li"},'c. Close the "Add new device" screen. You should see your device listed\nunder the "Devices" tab, and you should see it\'s status change to "Online".'),(0,o.kt)("p",{parentName:"li"},"d. ",(0,o.kt)("strong",{parentName:"p"},"If the device does not shutdown:")," This means that setup has not\ncompleted. Setup should not take more than a few minutes. The most common\ncause of setup not completing is bad WiFi credentials."),(0,o.kt)("p",{parentName:"li"},"e. ",(0,o.kt)("strong",{parentName:"p"},"Note for Rock Pi:")," balena's instructions specify that the device is\npowered off when the LED is no longer on. The blue LED indicates the device\nis on; the green LED indicates the device is merely plugged in, and so will\nnot turn off.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},'Once the device shows up in your fleet dashboard with the status "Online",\nyour device should be ready to go.')),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Remember to remove the SD Card from your device once it is set up."))),(0,o.kt)("h3",{id:"configure-your-dev-environment"},"Configure Your Dev Environment"),(0,o.kt)("p",null,"In order to easily deploy code from your dev environment to your device, you'll\nneed to install the balena CLI."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Continue following the same docs as before to install balena CLI:\n",(0,o.kt)("a",{parentName:"li",href:"https://www.balena.io/docs/learn/getting-started/raspberrypi3/nodejs/#install-the-balena-cli"},"https://www.balena.io/docs/learn/getting-started/raspberrypi3/nodejs/#install-the-balena-cli"))),(0,o.kt)("h3",{id:"push-a-release"},"Push a Release"),(0,o.kt)("p",null,"After the CLI is installed, and you have logged in, you can push a release of\nSamizdApp to your device."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Build the ",(0,o.kt)("inlineCode",{parentName:"li"},"daemon/next")," project:",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cd daemon/next\nnpm install\nnpm run export\ncd ../../\n"))),(0,o.kt)("li",{parentName:"ol"},"Build the entire project and push to your device via balenaCloud (expect\nthis to take awhile before completing):",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"balena push ${org}/${fleet} -m\n")),"where ",(0,o.kt)("inlineCode",{parentName:"li"},"${org}")," is the name of your organization, typically your username,\nand ",(0,o.kt)("inlineCode",{parentName:"li"},"${fleet}")," is the name you gave to you fleet. (The full slug of your\nfleet can easily be copied from the fleet Summary page.)"),(0,o.kt)("li",{parentName:"ol"},"Once the push has successfully completed, balena will propagate it to all\nthe devices in your fleet. You can monitor this in the dashboard page for\nyour device in balenaCloud. Once the release for all services has been\nupdated, the deployment is complete. You can monitor the logs for any\nruntime errors.")))}p.isMDXComponent=!0}}]);